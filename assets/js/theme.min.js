const storageKey="theme-preference",onClick=()=>{theme.value="false"===theme.value?"true":"false",setPreference()},getColorPreference=()=>localStorage.getItem(storageKey)?localStorage.getItem(storageKey):window.matchMedia("(prefers-color-scheme: dark)").matches?"true":"false",setPreference=()=>{localStorage.setItem(storageKey,theme.value),reflectPreference()},reflectPreference=()=>{document.firstElementChild.setAttribute("data-prefers-dark",theme.value),document.querySelector('#themes')?.setAttribute("aria-pressed",theme.value)},theme={value:getColorPreference()};reflectPreference(),window.onload=()=>{reflectPreference(),document.querySelector('#themes').addEventListener("click",onClick)},window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:e})=>{theme.value=e?"true":"false",setPreference()});